{% extends '@!NelmioApiDoc/SwaggerUi/index.html.twig' %}

{% block stylesheets %}
	{{ nelmioAsset(assets_mode, 'swagger-ui/swagger-ui.css') }}
	{{ nelmioAsset(assets_mode, 'style.css') }}
	<style>
		header:before {
			background-color: #fafafa;
		}
		header #logo {
			right: unset;
			left: 60px;
		}
        header #logo img {
            background: none;
        }
		header .app-title {
			display: flex;
		}
		header .subtitle {
			font-family: system-ui, sans-serif;
            font-weight: 600;
			color: #555;
			margin: auto auto auto 1em;
		}
        small#title-app-version span {
            display: block;
            font-family: system-ui, sans-serif;
            font-weight: 500;
            margin: 10px auto auto 5px;
            color: #555;
            font-size: 12px;
        }
        #swagger-ui.api-platform .swagger-ui .wrapper {
            padding: 0 60px 0 60px;
            margin: 0 auto 0 0;
        }
        #swagger-ui.api-platform .swagger-ui .auth-container .wrapper {
            padding: 0;
            margin: auto;
        }
        @media all and (max-width: 1366px) {
            #swagger-ui.api-platform .swagger-ui .wrapper {
                padding: 0 40px 0 40px;
            }
		    header #logo {
                left: 40px;
            }
        }
        @media all and (max-width: 1024px) {
            #swagger-ui.api-platform .swagger-ui .wrapper {
                padding: 0 20px 0 20px;
            }
            header #logo {
                left: 20px;
            }
        }
        @media all and (max-width: 600px) {
            #swagger-ui.api-platform .swagger-ui .wrapper {
                padding: 0 10px 0 10px;
            }
            header #logo {
                left: 20px;
            }
        }
        #swagger-ui button.authorization__btn {
            padding: 4px 10px 0 0;
        }
		#swagger-ui {
			padding: 0;
		}
        #swagger-ui .swagger-ui .markdown code, .swagger-ui .renderedMarkdown code {
            background: rgb(255 0 0 / 5%);
            border-radius: 4px;
            color: #ff3c3c;
            font-family: monospace;
            font-size: unset;
            font-weight: 600;
            padding: 0 4px;
        }
		#swagger-ui .information-container {
			display: none;
		}
		#swagger-ui .opblock-summary-control {
			margin-right: 1em;
		}
        #swagger-ui pre.microlight {
            display: flex !important;
            flex-direction: column;
        }
        #swagger-ui code.language-json {
            margin: auto 0;
        }
	</style>
{% endblock stylesheets %}

{% block header %}
	<a class="app-title" style="text-decoration: none;" id="logo" href="/api/doc">
		<img src="/images/logo.png" class="main-logo" alt="Logo">
		<span class="subtitle">API Service Documentation</span>
        <small id="title-app-version"></small>
	</a>
{% endblock %}

{% block swagger_initialization %}
	<script type="text/javascript">
		(function () {
            var swaggerUI = {{ swagger_ui_config|json_encode(65)|raw }};
            var additionalConfig = {
                deepLinking: true
            };
            window.onload = loadSwaggerUI(Object.assign(swaggerUI, additionalConfig));
        })();
	</script>
    <script type="text/javascript">
        (function() {
            const data = JSON.parse(document.querySelector('#swagger-data').innerHTML).spec;
            const version = data.info.version;
            const element = document.querySelector('#title-app-version');
            element.innerHTML = '<span>' + version + '</span>';
        })();
        (function() {
            const modelsSection = document.querySelector('#swagger-ui > section.swagger-ui div.wrapper > section.block > section.models');
            const button = modelsSection.querySelector('.models-control');
            const arrowIcon = button.querySelector('use');
            const data = modelsSection.querySelector('.no-margin');
            
            data.innerHTML = '';
            arrowIcon.setAttribute('xlink:href', '#large-arrow-down');
            modelsSection.classList.remove('is-open');
            button.setAttribute('aria-expanded', 'false');
        })();
    </script>
{% endblock swagger_initialization %}
